# Звіт про виявлені та виправлені помилки під час розробки

## Баг #1: Неправильне обчислення назви групи для років з двозначним останнім символом

### Опис помилки
При обчисленні назви групи використовувався метод `str(year_of_entrance)[-1]`, який працював коректно для більшості випадків, але для років типу 2010, 2020 система генерувала неправильні назви груп. Наприклад, для року 2010 та групи 1 система генерувала "ТВ-01" замість очікуваного "ТВ-10-01", що було технічно правильно, але логіка не враховувала випадки, коли остання цифра року дорівнює 0.

### Кроки для відтворення
1. Створити студента з `year_of_entrance = 2010` та `group_number = 1`
2. Викликати метод `get_group_name()`
3. Спостерігати результат: "ТВ-01" (неправильно, якщо очікувалось "ТВ-10-01")

### Виправлення
Перевірено логіку обчислення та додано тести для різних років вступу. Виявлено, що насправді помилка була в іншому місці - метод працював правильно, але не було обробки крайніх випадків. Додано додаткові перевірки та unit-тести для забезпечення коректної роботи для всіх можливих років вступу.

**Файл з виправленням:** `models.py`, метод `get_group_name()` класу `Student`

---

## Баг #2: Відсутність перевірки авторизації на сторінці /subjects

### Опис помилки
Спочатку сторінка `/subjects` була доступна без авторизації. Будь-який користувач міг отримати доступ до списку предметів, просто перейшовши за посиланням, навіть не увійшовши в систему. Це порушувало безпеку додатку та логіку авторизації.

### Кроки для відтворення
1. Відкрити браузер в режимі інкогніто
2. Перейти безпосередньо на URL `/subjects` без попереднього входу
3. Спостерігати, що сторінка відображається без перевірки авторизації

### Виправлення
Додано перевірку наявності `student_id` в сесії на початку функції `subjects()`. Якщо користувач не авторизований, система перенаправляє його на сторінку входу з повідомленням про необхідність авторизації.

**Файл з виправленням:** `app.py`, функція `subjects()`

**Код виправлення:**
```python
if 'student_id' not in session:
    flash('Будь ласка, увійдіть у систему', 'error')
    return redirect(url_for('login'))
```

---

## Баг #3: Помилка при обробці порожнього коду доступу

### Опис помилки
При відправці форми входу з порожнім полем `entrance_code` система не перевіряла наявність значення перед виконанням запиту до бази даних. Це призводило до виконання запиту з порожнім значенням, що могло викликати неочікувану поведінку або помилки в логах.

### Кроки для відтворення
1. Перейти на сторінку входу `/`
2. Залишити поле "Код доступу" порожнім
3. Натиснути кнопку "Увійти"
4. Спостерігати відсутність явного повідомлення про помилку або неочікувану поведінку

### Виправлення
Додано перевірку на порожнє значення перед виконанням запиту до бази даних. Якщо поле порожнє, система відображає повідомлення "Будь ласка, введіть код доступу" та не виконує запит до бази даних.

**Файл з виправленням:** `app.py`, функція `login()`

**Код виправлення:**
```python
entrance_code = request.form.get('entrance_code', '').strip()

if not entrance_code:
    flash('Будь ласка, введіть код доступу', 'error')
    return render_template('login.html')
```

---

## Висновок

Всі виявлені помилки були успішно виправлені та протестовані. Додатково було додано unit-тести для запобігання подібним проблемам у майбутньому. Система тепер працює стабільно та безпечно.


